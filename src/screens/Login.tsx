import React from 'react'; import { ScrollView,View,Text,TextInput,Pressable,StyleSheet,Image,Alert } from 'react-native'; import { signInEmailPassword } from '../auth/firebaseAuth'; import { configureGoogle, signInWithGoogle } from '../auth/google'; import { useNavigation } from '@react-navigation/native'; const theme=require('../config/tameTheme').TameTheme; export default function Login(){ const nav:any=useNavigation(); const [email,setEmail]=React.useState('taylor@example.com'); const [password,setPassword]=React.useState('password123'); React.useEffect(()=>{ configureGoogle(process.env.EXPO_PUBLIC_GOOGLE_WEB_CLIENT_ID||'YOUR_GOOGLE_WEB_CLIENT_ID'); },[]); const submit=async()=>{ try{ await signInEmailPassword(email,password); nav.replace('HomeScreen'); }catch(e:any){ if(e?.code==='auth/multi-factor-auth-required'){ nav.navigate('MFAVerify',{resolverError:e}); return;} Alert.alert('Auth failed', e?.message||String(e)); } }; return (<ScrollView contentContainerStyle={{padding:16, backgroundColor: theme.colors.surface}}><Image source={require('../../assets/brand/tame-logo.jpg')} style={{width:160,height:160,borderRadius:12,alignSelf:'center',marginTop:8}} /><Text style={[s.h,{color:theme.colors.primary,alignSelf:'center',marginTop:8}]}>Sign in</Text><View style={s.card}><TextInput style={s.in} value={email} onChangeText={setEmail} placeholder='Email' autoCapitalize='none' keyboardType='email-address'/><TextInput style={s.in} value={password} onChangeText={setPassword} placeholder='Password' secureTextEntry/><Pressable style={[s.btn,{borderColor:theme.colors.primary}]} onPress={submit}><Text style={[s.bt,{color:theme.colors.primary}]}>Sign in</Text></Pressable><Pressable style={[s.btn,{borderColor:theme.colors.secondary}]} onPress={async()=>{ try{ await signInWithGoogle(); nav.replace('HomeScreen'); }catch(e:any){ if(e?.code==='auth/multi-factor-auth-required'){ nav.navigate('MFAVerify',{resolverError:e}); return;} alert(e?.message||String(e)); } }}><Text style={[s.bt,{color:theme.colors.secondary}]}>Sign in with Google</Text></Pressable><Pressable style={[s.btn,{borderColor:'#333'}]} onPress={()=>nav.navigate('PhoneSignIn')}><Text style={[s.bt,{color:'#333'}]}>Sign in with Phone (SMS)</Text></Pressable></View></ScrollView>); } const s=StyleSheet.create({ h:{fontSize:22,fontWeight:'900'}, card:{borderWidth:1,borderRadius:12,padding:12,marginTop:12,backgroundColor:'#fff', borderColor:'#E5E7EB'}, in:{borderWidth:1,borderRadius:10,padding:10,marginTop:8,borderColor:'#CBD5E1',backgroundColor:'#fff'}, btn:{borderWidth:2,borderRadius:10,padding:10,marginTop:12,alignSelf:'flex-start'}, bt:{fontWeight:'900'} });
